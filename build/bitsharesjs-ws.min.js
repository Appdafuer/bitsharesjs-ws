!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function n(t,e,i){function o(c,s){if(!e[c]){if(!t[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var f=e[c]={t:{}};t[c][0].call(f.t,function(n){var e=t[c][1][n];return o(e||n)},f,f.t,n,t,e,i)}return e[c].t}for(var r="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,t,e){"use strict";function i(n){return n&&n.s?n:{default:n}}e.s=!0;var o=i(n("./ChainWebSocket")),r=i(n("./GrapheneApi")),c=i(n("./ChainConfig")),s=void 0,u=!0;e.default={u:function(n){this.h=n,s&&s.u(n)},l:function(n){u=n},reset:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=this,e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return this.close().then(function(){return(s=new a).u(t.h),s&&e&&s.connect(n,i),s})},v:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3];return s||(s=new a).u(this.h),s&&t&&s.connect(n,e,i),s},p:function(){return Apis.v().m},close:function(){return s?new Promise(function(n){s.close().then(function(){s=null,n()})}):Promise.resolve()}};var a=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return n.prototype.connect=function(n,t){var e=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.url=n;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this._=new o.default(n,this.h,t,u,function(){e.T.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.k=this._.C("","").then(function(){console.log("Connected to API node:",n),e.T=new r.default(e._,"database"),e.S=new r.default(e._,"network_broadcast"),e.g=new r.default(e._,"history"),i&&(e.O=new r.default(e._,"crypto"));var t=e.T.init().then(function(){return e.T.exec("get_chain_id",[]).then(function(n){return e.m=n,c.default.P(n)})});e._.W=function(){e._.C("","").then(function(){e.T.init().then(function(){e.h&&e.h("reconnect")}),e.S.init(),e.g.init(),i&&e.O.init()})};var o=[t,e.S.init(),e.g.init()];return i&&o.push(e.O.init()),Promise.all(o)})},n.prototype.close=function(){var n=this;return this._?this._.close().then(function(){n._=null}):(this._=null,Promise.resolve())},n.prototype.R=function(){return this.T},n.prototype.A=function(){return this.S},n.prototype.D=function(){return this.g},n.prototype.G=function(){return this.O},n.prototype.u=function(n){this.h=n},n}();t.t=e.default},{I:2,j:3,U:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var i=void 0,o={H:n.N.M||"GPH"};i={q:"CORE",H:"GPH",F:15,L:86400,B:86400,J:{V:{q:"BTS",H:"BTS",m:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},K:{q:"MUSE",H:"MUSE",m:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},X:{q:"TEST",H:"TEST",m:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},Y:{q:"GOV",H:"FEW",m:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},P:function(n){var t=void 0,e=void 0,r=void 0,c=void 0,s=void 0;for(t=0,e=(s=Object.keys(i.J)).length;t<e;t++)if(c=s[t],(r=i.J[c]).m===n)return i.Z=c,r.H&&(i.H=r.H,o.H=r.H),{Z:c,$:r};i.Z||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.q="CORE",i.H="GPH",o.H="GPH",i.F=15,i.L=86400,console.log("Chain config reset")},nn:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";i.H=n,o.H=n}},e.default=i,t.t=e.default}).call(this,n("_process"))},{tn:5}],3:[function(n,t,e){"use strict";e.s=!0;var i=n("reconnecting-websocket"),o=5,r=2*o,c=function(){function n(t,e){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=this,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.h=e,this.en=setTimeout(function(){s.in&&s.in(new Error("Connection attempt timed out: "+t))},c);var f=function(n){return n||"undefined"==typeof WebSocket||"undefined"==typeof document?i:WebSocket}(u);try{this.on=new f(t)}catch(n){console.error("invalid websocket URL:",n,t),this.on=new f("wss://127.0.0.1:8090")}this.on.rn=5e3,this.in=null,this.W=null,this.cn=o,this.sn=r,this.un=a,this.an=new Promise(function(n,t){s.in=t,s.on.onopen=function(){clearTimeout(s.en),s.h&&s.h("open"),s.W&&s.W(),s.fn=setInterval(function(){if(s.sn--,0==s.sn)return s.on.terminate?s.on.terminate():s.on.close(),clearInterval(s.fn),void(s.fn=void 0);s.cn--,0==s.cn&&(s.un&&s.un(),s.cn=o)},5e3),n()},s.on.onerror=function(n){s.fn&&(clearInterval(s.fn),s.fn=void 0),clearTimeout(s.en),s.h&&s.h("error"),s.in&&s.in(n)},s.on.onmessage=function(n){s.sn=r,s.listener(JSON.parse(n.data))},s.on.onclose=function(){s.fn&&(clearInterval(s.fn),s.fn=void 0);for(var n=new Error("connection closed"),t=s.hn+1;t<=s.ln;t+=1)s.dn[t].reject(n);s.h&&s.h("closed"),s.vn&&s.vn()}}),this.ln=0,this.hn=0,this.dn={},this.wn={},this.pn={}}return n.prototype.call=function(n){var t=this;if(1!==this.on.readyState)return Promise.reject(new Error("websocket state error:"+this.on.readyState));var e=n[1];if(this.ln+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this.wn[this.ln]={bn:n[2][0]},n[2][0]=this.ln),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var r in this.wn)if(this.wn[r].bn===i){this.pn[this.ln]=r;break}}var c={method:"call",mn:n};return c.id=this.ln,this.cn=o,new Promise(function(n,e){t.dn[t.ln]={time:new Date,resolve:n,reject:e},t.on.send(JSON.stringify(c))})},n.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.mn[0]),t?e=this.wn[n.id].bn:(e=this.dn[n.id],this.hn=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.dn[n.id],this.pn[n.id]&&(delete this.wn[this.pn[n.id]],delete this.pn[n.id])):e&&t?e(n.mn[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.C=function(n,t){var e=this;return this.an.then(function(){return e.call([1,"login",[n,t]])})},n.prototype.close=function(){var n=this;return new Promise(function(t){n.vn=function(){t(),n.vn=null},n.on.close(),1!==n.on.readyState&&t()})},n}();e.default=c,t.t=e.default},{_n:6}],4:[function(n,t,e){"use strict";e.s=!0;var i=function(){function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._=t,this.yn=e}return n.prototype.init=function(){var n=this;return this._.call([1,this.yn,[]]).then(function(t){return n.Tn=t,n})},n.prototype.exec=function(n,t){return this._.call([this.Tn,n,t]).catch(function(e){throw console.log("!!! GrapheneApi error: ",n,t,e,JSON.stringify(e)),e})},n}();e.default=i,t.t=e.default},{}],5:[function(n,t,e){function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(n){if(a===setTimeout)return setTimeout(n,0);if((a===i||!a)&&setTimeout)return a=setTimeout,setTimeout(n,0);try{return a(n,0)}catch(t){try{return a.call(null,n,0)}catch(t){return a.call(this,n,0)}}}function c(){if(!v){var n=r(function(){v&&l&&(v=!1,l.length?d=l.concat(d):w=-1,d.length&&c())});v=!0;for(var t=d.length;t;){for(l=d,d=[];++w<t;)l&&l[w].kn();w=-1,t=d.length}l=null,v=!1,function(n){if(f===clearTimeout)return clearTimeout(n);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(n);try{f(n)}catch(t){try{return f.call(null,n)}catch(t){return f.call(this,n)}}}(n)}}function s(n,t){this.En=n,this.Cn=t}function u(){}var a,f,h=t.t={};!function(){try{a="function"==typeof setTimeout?setTimeout:i}catch(n){a=i}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(n){f=o}}();var l,d=[],v=!1,w=-1;h.Sn=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];d.push(new s(n,t)),1!==d.length||v||r(c)},s.prototype.kn=function(){this.En.apply(null,this.Cn)},h.title="browser",h.gn=!0,h.N={},h.On=[],h.version="",h.Pn={},h.xn=u,h.addListener=u,h.Wn=u,h.Rn=u,h.removeListener=u,h.An=u,h.Dn=u,h.Gn=u,h.In=u,h.jn=function(n){return[]},h.Un=function(n){throw new Error("process.binding is not supported")},h.Hn=function(){return"/"},h.Mn=function(n){throw new Error("process.chdir is not supported")},h.Nn=function(){return 0}},{}],6:[function(n,t,e){"use strict";var i=function(n){return n&&2===n.CLOSING},o=function(n){return n.qn+Math.random()*n.qn},r=["onopen","onclose","onmessage","onerror"],c=function(n,t,e){var s=this;void 0===e&&(e={});var u,a,f=0,h=0,l=!0,d=null,v={};if(!(this instanceof c))throw new TypeError("Failed to construct 'ReconnectingWebSocket': Please use the 'new' operator");var w={constructor:"undefined"!=typeof WebSocket&&i(WebSocket)?WebSocket:null,Fn:1e4,qn:1500,Ln:1.3,en:4e3,Bn:1/0,debug:!1};if(Object.keys(w).filter(function(n){return e.hasOwnProperty(n)}).forEach(function(n){return w[n]=e[n]}),!i(w.constructor))throw new TypeError("Invalid WebSocket constructor. Set `options.constructor`");var p=w.debug?function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return console.log.apply(console,["RWS:"].concat(n))}:function(){},b=function(n,t){return setTimeout(function(){var e=new Error(t);e.code=n,Array.isArray(v.error)&&v.error.forEach(function(n){return(0,n[0])(e)}),u.onerror&&u.onerror(e)},0)},m=function(){p("handleClose",{Jn:l}),p("retries count:",++h),h>w.Bn?b("EHOSTDOWN","Too many failed connection attempts"):(f=f?function(n,t){var e=t*n.Ln;return e>n.Fn?n.Fn:e}(w,f):o(w),p("handleClose - reconnectDelay:",f),l&&setTimeout(_,f))},_=function(){if(l){p("connect");var e=u,i="function"==typeof n?n():n;u=new w.constructor(i,t),a=setTimeout(function(){p("timeout"),u.close(),b("ETIMEDOUT","Connection timeout")},w.en),p("bypass properties");for(var c in u)["addEventListener","removeEventListener","close","send"].indexOf(c)<0&&function(n,t,e){Object.defineProperty(t,e,{get:function(){return n[e]},set:function(t){n[e]=t},Vn:!0,zn:!0})}(u,s,c);u.addEventListener("open",function(){clearTimeout(a),p("open"),f=o(w),p("reconnectDelay:",f),h=0}),u.addEventListener("close",m),function(n,t,e){Object.keys(e).forEach(function(t){e[t].forEach(function(e){var i=e[0],o=e[1];n.addEventListener(t,i,o)})}),t&&r.forEach(function(e){n[e]=t[e]})}(u,e,v),u.onclose=u.onclose||d,d=null}};p("init"),_(),this.close=function(n,t,e){void 0===n&&(n=1e3),void 0===t&&(t="");var i=void 0===e?{}:e,o=i.Kn,r=void 0!==o&&o,c=i.Qn,s=void 0===c||c,a=i.Xn,b=void 0===a?0:a;if(p("close - params:",{reason:t,Kn:r,Qn:s,Xn:b,Yn:h,Bn:w.Bn}),l=!r&&h<=w.Bn,b&&(f=b),u.close(n,t),s){var _={code:n,reason:t,wasClean:!0};m(),u.removeEventListener("close",m),Array.isArray(v.close)&&v.close.forEach(function(n){var t=n[0],e=n[1];t(_),u.removeEventListener("close",t,e)}),u.onclose&&(d=u.onclose,u.onclose(_),u.onclose=null)}},this.send=function(n){u.send(n)},this.addEventListener=function(n,t,e){Array.isArray(v[n])?v[n].some(function(n){return n[0]===t})||v[n].push([t,e]):v[n]=[[t,e]],u.addEventListener(n,t,e)},this.removeEventListener=function(n,t,e){Array.isArray(v[n])&&(v[n]=v[n].filter(function(n){return n[0]!==t})),u.removeEventListener(n,t,e)}};t.t=c},{}]},{},[1])(1)});